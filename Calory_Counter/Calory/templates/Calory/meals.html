{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Meal Manager</title>
    <style>
        body{
            font-family:Arial;
            background:#f4f6fb;
            padding:30px;
        }

        .box{
            max-width:700px;
            margin:auto;
            background:white;
            padding:25px;
            border-radius:12px;
            box-shadow:0 10px 25px rgba(0,0,0,.1);
        }

        .btn{
            padding:8px 14px;
            text-decoration:none;
            border-radius:6px;
            color:white;
            margin-right:5px;
        }

        .add{ background:#28a745; }
        .edit{ background:#ffc107; color:black;}
        .delete{ background:#dc3545;}
        .back{ background:#007bff;}

        table{
            width:100%;
            margin-top:20px;
            border-collapse:collapse;
        }

        th,td{
            padding:10px;
            border-bottom:1px solid #ddd;
            text-align:left;
        }
    </style>
</head>
<body>

<div class="box">

<h2>üçΩ Meals ({{ date|date:"M d, Y" }})</h2>

<!-- IMPORTANT FIX HERE -->
<a href="{% url 'add_meal' %}?date={{ date|date:'Y-m-d' }}" class="btn add">+ Add Meal</a>

<a href="{% url 'dashboard' %}" class="btn back">‚¨Ö Back Dashboard</a>

<table>
<tr>
    <th>Food</th>
    <th>Meal</th>
    <th>Qty</th>
    <th>Calories</th>
    <th>Action</th>
</tr>

{% for m in meals %}
<tr>
    <td>{{ m.food.name }}</td>
    <td>{{ m.meal }}</td>
    <td>{{ m.qty }}</td>
    <td>{{ m.calories }}</td>
    <td>
        <a href="{% url 'edit_meal' m.id %}" class="btn edit">Edit</a>
        <a href="{% url 'delete_meal' m.id %}" class="btn delete">Delete</a>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="5">No meals added today</td>
</tr>
{% endfor %}

</table>

</div>
</body>
</html>
